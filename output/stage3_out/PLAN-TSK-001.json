{
  "plan_id": "PLAN-TSK-001",
  "selected_task_id": "TSK-001",
  "goal": "Forecast rice export value to Bangladesh using historical trends",
  "task_category": "predictive",
  "created_at": "2025-12-01T22:09:40.164440",
  "created_by": "stage3_agent",
  "artifacts": {
    "intermediate_table": "TSK-001_data.parquet",
    "intermediate_format": "parquet",
    "expected_columns": [
      "HS Code",
      "Description",
      "2024 - 25-Value (INR)",
      "2020 - 21-Value (INR)",
      "2020 - 21-Quantity",
      "2021 - 22-Value (INR)",
      "2021 - 22-Quantity",
      "2022 - 23-Value (INR)",
      "2022 - 23-Quantity"
    ],
    "expected_row_count_range": [
      6,
      8
    ]
  },
  "key_normalization": [],
  "file_instructions": [
    {
      "file_id": "FILE-001",
      "original_name": "Export-of-Rice-Varieties-to-Bangladesh,-2018-19-to-2024-25.csv",
      "alias": "rice_exports",
      "filters": [],
      "rename_columns": {},
      "join_keys": [
        "HS Code",
        "Description"
      ],
      "keep_columns": [
        "HS Code",
        "Description",
        "2024 - 25-Value (INR)",
        "2020 - 21-Value (INR)",
        "2020 - 21-Quantity",
        "2021 - 22-Value (INR)",
        "2021 - 22-Quantity",
        "2022 - 23-Value (INR)",
        "2022 - 23-Quantity"
      ],
      "notes": "Dropped rows with missing target values (25% nulls in 2024-25 Value column)"
    }
  ],
  "join_steps": [
    {
      "step": 1,
      "description": "Load base table",
      "left_table": "rice_exports",
      "right_table": null,
      "join_type": "base",
      "join_keys": [
        "HS Code",
        "Description"
      ],
      "left_on": [],
      "right_on": [],
      "expected_cardinality": "base",
      "validation": {
        "check_duplicates_on_keys": [
          "HS Code",
          "Description"
        ],
        "expected_unique": false,
        "check_row_count_stable": true,
        "check_no_duplicates_introduced": true,
        "acceptable_coverage": 0.65,
        "max_cardinality_ratio": 1.0
      }
    }
  ],
  "feature_engineering": [
    {
      "feature_name": "lagged_value_2022_23_to_2023_24",
      "description": "Year-over-year percentage change in value from 2022-23 to 2023-24",
      "transform": "percentage change",
      "depends_on": [
        "2022 - 23-Value (INR)",
        "2023 - 24-Value (INR)"
      ],
      "implementation": "df['lagged_value_2022_23_to_2023_24'] = ((df['2023 - 24-Value (INR)'] - df['2022 - 23-Value (INR)']) / df['2022 - 23-Value (INR)']).fillna(0)"
    },
    {
      "feature_name": "rolling_avg_quantity_3yr",
      "description": "3-year rolling average of quantity",
      "transform": "rolling mean",
      "depends_on": [
        "2020 - 21-Quantity",
        "2021 - 22-Quantity",
        "2022 - 23-Quantity"
      ],
      "implementation": "df['rolling_avg_quantity_3yr'] = df[['2020 - 21-Quantity', '2021 - 22-Quantity', '2022 - 23-Quantity']].mean(axis=1)"
    },
    {
      "feature_name": "value_quantity_ratio_2022_23",
      "description": "Value-to-quantity ratio for 2022-23",
      "transform": "ratio",
      "depends_on": [
        "2022 - 23-Value (INR)",
        "2022 - 23-Quantity"
      ],
      "implementation": "df['value_quantity_ratio_2022_23'] = df['2022 - 23-Value (INR)'] / df['2022 - 23-Quantity'].replace(0, 1)"
    }
  ],
  "validation": {
    "time_split": {
      "method": "year-based",
      "train_years": "2018-19 to 2022-23",
      "test_years": "2023-24 to 2024-25",
      "validation_years": null,
      "leakage_check": "Ensure no future data leakage by using strictly chronological splits"
    },
    "coverage_checks": [
      {
        "check": "Target completeness",
        "threshold": 0.75,
        "description": "At least 75% of target values must be non-null after dropping missing rows",
        "action_if_violation": "Reconsider feature engineering or data collection"
      }
    ],
    "cardinality_checks": [
      {
        "check": "Unique HS Code-Description pairs",
        "expected": "unique",
        "action_if_violation": "Investigate duplicates and resolve conflicts"
      }
    ],
    "additional_checks": [
      "Data loaded",
      "No duplicates on join keys"
    ]
  },
  "expected_model_types": [
    "Regression",
    "Time Series"
  ],
  "evaluation_metrics": [
    "RMSE",
    "R2",
    "MAE"
  ],
  "notes": [
    "Data validation: All columns verified â‰¥65% complete",
    "Currency: Using INR as per preference",
    "Dropped 2 rows with missing target values (25% nulls in 2024-25 Value column)"
  ]
}