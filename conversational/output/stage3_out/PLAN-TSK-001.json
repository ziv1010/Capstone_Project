{
  "_meta": {
    "timestamp": "2025-12-08T14:05:02.130364",
    "checksum": "cc74afa05d771fc5",
    "version": "1.0",
    "stage": "stage3",
    "type": "execution_plan"
  },
  "data": {
    "plan_id": "PLAN-TSK-001",
    "selected_task_id": "TSK-001",
    "goal": "Forecast food grain production by crop and season using historical data from 2020-2025",
    "task_category": "forecasting",
    "file_instructions": [
      {
        "filename": "All-India-Estimates-of-Area,-Production-&-Yield-of-Food-Grains.csv",
        "filepath": "data/",
        "columns_to_use": [
          "Crop",
          "Season",
          "Area-2020-21",
          "Area-2021-22",
          "Area-2022-23",
          "Area-2023-24",
          "Area-2024-25",
          "Production-2020-21",
          "Production-2021-22",
          "Production-2022-23",
          "Production-2023-24",
          "Production-2024-25",
          "Yield-2020-21",
          "Yield-2021-22",
          "Yield-2022-23",
          "Yield-2023-24",
          "Yield-2024-25"
        ],
        "filters": [
          "Season != 'Total'"
        ],
        "date_column": null,
        "parse_dates": [
          "Year"
        ]
      }
    ],
    "join_steps": [],
    "feature_engineering": [
      {
        "name": "Wide-to-Long-Conversion",
        "description": "Convert wide-format temporal data to long format with one row per year",
        "source_columns": [
          "Crop",
          "Season",
          "Area-2020-21",
          "Area-2021-22",
          "Area-2022-23",
          "Area-2023-24",
          "Area-2024-25",
          "Production-2020-21",
          "Production-2021-22",
          "Production-2022-23",
          "Production-2023-24",
          "Production-2024-25",
          "Yield-2020-21",
          "Yield-2021-22",
          "Yield-2022-23",
          "Yield-2023-24",
          "Yield-2024-25"
        ],
        "implementation_code": "df = pd.melt(df, id_vars=['Crop', 'Season'], var_name='Year_Metric', value_name='Value')\nmelted['Year'] = melted['Year_Metric'].str.split('-').str[1] + '-' + melted['Year_Metric'].str.split('-').str[2]\nmelted['Metric'] = melted['Year_Metric'].str.split('-').str[0]\nlong_df = melted.pivot_table(index=['Crop', 'Season', 'Year'], columns='Metric', values='Value').reset_index()\nlong_df['Year'] = pd.to_datetime(long_df['Year'], format='%Y-%y')",
        "dtype": null
      },
      {
        "name": "Lag-Features",
        "description": "Create lag features for Area and Yield",
        "source_columns": [
          "Area",
          "Yield"
        ],
        "implementation_code": "for col in ['Area', 'Yield']:\n    long_df[f'{col}_lag1'] = long_df.groupby(['Crop', 'Season'])[col].shift(1)\n    long_df[f'{col}_lag2'] = long_df.groupby(['Crop', 'Season'])[col].shift(2)",
        "dtype": null
      },
      {
        "name": "Rolling-Features",
        "description": "Create rolling mean features for Area and Yield",
        "source_columns": [
          "Area",
          "Yield"
        ],
        "implementation_code": "for col in ['Area', 'Yield']:\n    long_df[f'{col}_rolling3'] = long_df.groupby(['Crop', 'Season'])[col].rolling(3).mean().reset_index(level=[0,1], drop=True)",
        "dtype": null
      }
    ],
    "target_column": "Production-2024-25",
    "date_column": "Year",
    "validation_strategy": "temporal",
    "train_end_date": null,
    "validation_end_date": null,
    "forecast_horizon": 1,
    "forecast_granularity": null,
    "forecast_type": "single_step",
    "expected_model_types": [
      "ARIMA",
      "RandomForest",
      "XGBoost"
    ],
    "evaluation_metrics": [
      "MAE",
      "RMSE",
      "MAPE"
    ],
    "output_columns": [],
    "artifacts_to_save": [],
    "created_at": "2025-12-08T14:05:02.129873"
  }
}